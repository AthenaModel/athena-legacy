<html>
<head>
<title><<project>> <<version>>: <<longproject>></title>
<style>
<<standardstyle>>
</style>
</head>

<body>
<<banner>>

<h2>Build Notes</h2>

<h3>Build 5.1.1, 12 March 2014</h3>
This build fixes a bug found by SoSACorp while running Athena in the cloud.
Essentially, in batch mode, Athena should not try to initialize the prefsdir
since it is only needed when there is a GUI present.<p>

<ul>
<li> Bug 4430: athena(1): Failure creating prefsdir
</ul><p>

<h3>Build 5.1.0, 9 September 2013</h3>
This build is the Athena 5 release candidate. It is identical to Athena 
5.0.16 except for the version number and these build notes.<p>

<h3>Build 5.0.16, 3 September 2013</h3>
Two more bug fixes to the athena_pbs(1) application.<p>

<ul>
<li> Bug 4120: PBS ignores specified number of nodes and test cases
<li> Bug 4121: PBS stop run needs to clean up temp files
</ul><p>

<h3>Build 5.0.15, 30 August 2013</h3>
This build has a few more bug fixes that continue filing off the rough edges
of the athena_pbs(1) application.<p>

<ul>
<li> Bug 4116: Athena pbs application needs restriction on nodes and test cases
<li> Bug 4117: axdb cases missing when ran in pbs application
<li> Bug 4118: Athena pbs application requires "pristine" .axdb files 
</ul><p>

<h3>Build 5.0.14, 29 August 2013</h3>
This build has a couple of bug fixes to the athena_pbs(1) application. There
is no new functionality.<p>

<ul>
<li> Bug 4114: athena pbs command should generate error message on Windows
<li> Bug 4115: athena_pbs(1): job dispatcher references athena.tcl not athena 
</ul><p>

<h3>Build 5.0.13, 20 August 2013</h3>
This build contains a whole slew of bug fixes and the addition of a new
Athena application for running Athena in batch mode on a Linux supercomputing
cluster that uses the Portable Batch System (PBS).  Details of this application
can be found on the athena_pbs(1) man page. The complete set of packages:<p>

<ul>
<li> Bug 3873: athena_sim(1): history module needs to be updated with latest econ inputs and outputs
<li> Bug 4060: Disabled Injects should not execute
<li> Bug 4074: athena(1): add PBS application
<li> Bug 4086: Update econ section of AAG for Athena 5
<li> Bug 4095: Mismatched Role bgerror when executing CURSE tactic
<li> Bug 4096: Mismatched Role bgerror when editing CURSE tactic
<li> Bug 4097: Update AUG with CURSE documentation and screenshots of UI.
<li> Bug 4104: athena(1): Output version in batch mode
<li> Bug 3800: Athena Help Typos
<li> Bug 3832: Subsistence Agriculture Flag is not Displayed
<li> Bug 3838: VREL CIV1 A is not tracked bgerror
<li> Bug 3845: Remove activity.FRC.PRESENCE.cost parameter
<li> Bug 3870: athena_sim(1): sa_flag not defaulting to 0 on CIVGROUP:CREATE order
<li> Bug 3885: Pick a Color box appears behind create group order dialog
<li> Bug 4084: athena(1): Order dialogs can drop behind main window
<li> Bug 4091: bgerror: No such script
<li> Bug 4094: Athena Help inconsistent with application
<li> Bug 4105: athena(1): Make [version] available at executive CLI
<li> Bug 4106: athena(1): Show criminal suppression in security browser
<li> Bug 4108: gofers return empty civ groups 
</ul><p>

<h3>Build 5.0.12, 12 August 2013</h3>

This build contains quite a few bug fixes. Most notable is a fix to the 
calculation for friction (previously known as volatility). Zero population
CIV groups and undeployed FRC groups were being incorrectly factored into
the equation. There's also some updates to the Athena Analyst's Guide. The
complete list of packages:<p>

<ul>
<li> Bug 4071: athena(1): fix econ model error handling when cell model fails to solve
<li> Bug 4073: athena(1): inject roles not being constrained properly
<li> Bug 4082: athena(1): change workdir(n) to use temporary directory or user supplied directory
<li> Bug 3876: Update INCOME Actor Dialog Box
<li> Bug 3880: CIV Group Detail Browser pages should include housing attributes
<li> Bug 3881: Detail Browser should say whether actor is BUDGET or INCOME
<li> Bug 3901: Typo in section 10.8.7 of AAG
<li> Bug 3976: No snapshot at tick bgerror
<li> Bug 3978: Empty CIV groups should not appear on Attitudes tab
<li> Bug 4048: Empty CIV groups bgerror
<li> Bug 4049: Previous snapshot in opened scenario causes bgerror
<li> Bug 4053: CIV group Supporting Actor help page
<li> Bug 4056: athena(1): cif redo problems
<li> Bug 4058: athena(1): [export] command omits script auto flag
<li> Bug 4077: Empty CIV groups affecting security 
</ul><p>

<h3>Build 5.0.11, 1 July 2013</h3>

This build contains some bug fixes related to CURSEs and the CURSE tactic.
There is also some fixes for when Athena is running in batch mode. The
set of packages:<p>

<ul>
<li> Bug 4040: Use existing force group role bgerror
<li> Bug 4041: Define new role should require a unique role name
<li> Bug 4050: No error message written to stdout in Windows
<li> Bug 4051: batch mode tk messagebox error, scenario with sanity check failures
<li> Bug 4052: athena(1): sanity check failures in batch mode need to be handled without Tk
<li> Bug 4054: ROLE not known in dictionary bgerror
</ul><p>

<h3>Build 5.0.10, 18 June 2013</h3>

This build introduces the concept of gofers.  Gofers, in a nutshell, are
objects that retrieve entities from Athena based upon a rule.  For example, 
a gofer could retrieve all non-empty civilian groups from a set of one or
more neighborhoods.  Another could retrieve all force groups owned by one or
more actors.  Gofers are used in the FUNDENI tactic and in the CURSE tactic.
They will probably become more prevalent moving forward.  This build also 
contains quite a few bug fixes and documentation updates.  As of this build
Athena no longer uses ActiveTcl Enterprise Edition in favor of the freely
available community edition. The complete list of packages:<p>

<ul>
<li> Bug 4046: Update Athena 5 to ActiveTcl 8.5.14
<li> Bug 4045: athena(1): update CURSE tactic to use gofer(n)
<li> Bug 4043: athena(1): gofer::ACTORS, gofer::FRCGROUPS, gofer::GROUPS rules
<li> Bug 4042: athena(1), athena_test(1): the Athena test suite should run in non-GUI mode
<li> Bug 4038: FLOW into empty CIV group causes bgerror
<li> Bug 4036: athena(1): bgerror when loading .adb in batch mode
<li> Bug 4035: Attrit enitire CIV group causes bgerror
<li> Bug 4034: athena(1): gofer::CIVGROUPS rules, part II
<li> Bug 4033: athena(1): gofer::FRCGROUPS, gofer::GROUPS, gofer::ACTORS
<li> Bug 4032: athena(1): gofer::CIVGROUPS rules
<li> Bug 4031: athena(1): Gofers Mark III
<li> Bug 4030: athena(1): bgerror when editing an inject of type COOP
<li> Bug 4029: axdb csvfile filename should add .csv
<li> Bug 4028: Disabled / Deleted CURSE sanity checks
<li> Bug 4025: Curses and Injects in the Help
<li> Bug 4024: Values of s,p,q do not change on Application / Curses Tab
<li> Bug 4023: CURSE page on Detail Browser displays too many injects
<li> Bug 4017: DEPLOY without reinforcement bgerror
<li> Bug 3995: error in my://app/group/{name}: argument not in valid range
<li> Bug 3977: Magic Cooperation Input not displayed in Rule Firings
<li> Bug 3946: Autogen Bugs 
</ul><p>

<h3>Build 5.0.9, 5 June 2013</h3>

This build has a number of changes in support of Athena running on a
supercomputing cluster. Essentially, Athena needs to be run completely
"headless" meaning that no Tk modules can be loaded when in batch mode. 
There is also a handful of minor functional enhancements and bug fixes.
The complete list of packages are as follows:<p>

<ul>
<li> Bug 4012: athena(1): Add Linux basekit to the tools directory
<li> Bug 4014: athena(1): need two validators for rolemap inputs
<li> Bug 4026: athena(1): do not load Tk when athena is in batchmode
<li> Bug 4008: athena(1): No executive reset on lock
<li> Bug 4009: athena(1): [call] executive command can call internal scripts by name
<li> Bug 4010: athena(1): Scripting Changes
<li> Bug 4016: athena(1): Smart Types and Fields
<li> Bug 4020: athena(1): rolemap and gofer dynaform_fields should be defined in projectlib.
<li> Bug 4022: athena(1): Move non-Tk modules from ui/ to shared/ 
<li> Bug 4027: Makefile: stop making install set tarball for Win32 
</ul><p>

<h3>Build 5.0.8, 22 May 2013</h3>

This build has a number of significant enhancements over previous
versions of Athena.  In particular:

<ul>
<li> Troops can now be deployed to a neighborhood without reinforcement: 
as troops are attrited week by the week, the number of troops deployed 
to the neighborhood decreases accordingly.
<li> The new CURSE tactic is an experimental GUI replacement for the
use of EXECUTIVE tactics to drive Magic Attitude Drivers.  It is already
quite capable, and is expected to become even more powerful in the next
few months.
<li> It is now possible to store executive scripts as part of the scenario,
and to edit them within Athena.  See Section 10 of the <i>Athena User's Guide</i>.
<li> It is now possible, using the "axdb" family of executive commands, to 
define an "experiment" consisting of many cases produced by varying some
number of "case parameters", and run the cases as one operation and save
the results to an experiment file for further analysis.
</ul><p>

In addition, there were a number of bug fixes.  The complete set of 
changes are as follows:<p>

<ul>
<li> Bug 3979: athena(1): DEPLOY without reinforcements
<li> Bug 3981: athena(1): better error handling when the actors sector has problems in the SAM
<li> Bug 3982: athena(1): Content for my://app/mad/{id} pages
<li> Bug 3983: athena(1): Allow timespec strings to refer to "RUN" and "LOCK".
<li> Bug 3984: athena(1): bgerror on start-up when -script doesn't exist.
<li> Bug 3985: athena(1): Paging for my://apps/sigvents
<li> Bug 3986: athena(1): simplification of sigevents(sim)
<li> Bug 3988: rolemapfield(n): A field for editing curse role mappings
<li> Bug 3993: athena(1): add CURSE/injects to athena
<li> Bug 3997: Update Athena 5 to ATEE 2013Q2
<li> Bug 3998: athena(1): FUND tactic dollars from BUDGET to INCOME actors not accounted for in CGE
<li> Bug 3999: athena(1): finish adding automated tests/docs for the CURSE/Inject functionality
<li> Bug 4003: 010-inject.test: test failures
<li> Bug 4004: Athena Experiment Database API
<li> Bug 4005: athena(1): Script Editor
<li> Bug 4006: athena(1): Remove [axdb script]
</ul>

<h3>Build 5.0.7, 22 April 2013</h3>
This build contains a significant change to the architecture of drivers. 
Essentially rule sets are now associated with "driver types". The purpose
of this architecture change is to enable display of rule firings in user
friendly forms in the detail browser. Thus, the detail browser now contains
rule firings in it's object tree. There is also a number of bug fixes that
came out of a visit to TRISA in early April and some bug fixes related to
the recent rebasing work. The complete list of packages:<p>

<ul>
<li> Bug 3916: athena(1): SAT:UPDATE order dialog needs a combobox for saliency
<li> Bug 3960: athena(1): Allow "g" parameter in ENSIT:CREATE, ENSIT:UPDATE
<li> Bug 3961: athena(1): in orders with "Start Mode", the default should be New Scenario.
<li> Bug 3962: athena(1): Lengthen EXECUTIVE tactic's parameter to 80 characters
<li> Bug 3964: athena(1): Save neighborhood population history
<li> Bug 3965: athena(1): autogen of large scenarios fails
<li> Bug 3970: athena(1): long run, large scenarios take a long time to return to PREP
<li> Bug 3939: athena(1): my://app/contribs/nbmood bgerrors with too many groups
<li> Bug 3944: SIM:STARTTICK bgerror
<li> Bug 3945: Rebase, change start tick causes bgerror
<li> Bug 3947: athena(1): Driver Type Architecture
<li> Bug 3952: athena(1): Help on Ensits, MAD browsers
<li> Bug 3966: athena(1): Rule Firing Pages
<li> Bug 3967: urlquery(n) replaces projmisc(n)
<li> Bug 3969: epagesize(n) type in projtypes(n)
<li> Bug 3971: athena(1): Page my://rdb/content pages
<li> Bug 3972: mybrowser(n): form action processing
<li> Bug 3973: athena(1): Add firings to detail browser's object tree
<li> Bug 3974: athena(1): my://app/driver/{id} page
</ul><p>

<h3>Build 5.0.6, 1 April 2013</h3>

This build contains two bug fixes.  In particular, it fixes a bug seen at TRISA
with regard to indirect effects.<p>

<ul>
<li> Bug 3937: athena(1): rule_firings, rule_inputs not purged on unlock
<li> Bug 3938: athena(1): URAM initialized with string proximity constants
</ul><p>

<h3>Build 5.0.5, 28 March 2013</h3>

This build contains quite a bit of new functionality.  A majority of the
work done is for 'rebasing' an Athena run.  This means that when Athena
is PAUSED there is an order that can be executed that will automatically 
take the current state of the simulation and set Athena back to the PREP
state with necessary data set as if an analyst had created an Athena scenario
using the final state of that run.  Athena then can be saved to a new scenario.
This should be useful for studies where it is necessary to have a series 
of successive Athena runs where the current run is some delta from the 
previous run.  Rebasing is available in the Orders > Simulation menu.  
Automatic generation of Athena scenarios is now also available to aid in 
testing.  See the 'autogen' family of commands in the helps.  There's also
a host of bug fixes and such in the list of packages:<p>

<ul>
<li> Bug 3905: athena(1): implement automatic scenario generation
<li> Bug 3907: athena(1): implement rebase mutator in econ model
<li> Bug 3909: athena(1): CGE and SAM rebase bug fixes
<li> Bug 3910: help(5): add macros to support construction of option lists
<li> Bug 3912: athena(1): update the autogen executive command helps
<li> Bug 3913: athena(1): BaseBasketValue on null page in CGE not being computed correctly
<li> Bug 3924: athena(1): autogen enhancements
<li> Bug 3933: athena(1): econ rebase not working right
<li> Bug 3903: weekclock(n): support for start tick
<li> Bug 3904: weekclock(n): checkpoint, restore, delta
<li> Bug 3906: athena(1): SIM:STARTTICK order
<li> Bug 3908: athena(1): SIM:REBASE order
<li> Bug 3911: athena(1): User can edit natural cooperation level
<li> Bug 3915: athena(1): Changes for uram(n) bug 3914
<li> Bug 3917: athena(1): attitude curve "start mode"
<li> Bug 3920: athena(1): civgroups.upc
<li> Bug 3921: athena(1): current levels not given to URAM on rebase lock
<li> Bug 3922: athena(1): Revised rebase architecture
<li> Bug 3923: athena(1): Revised rebase architecture, part II
<li> Bug 3927: parmdb(5): force.law.crimrel 
</ul>

<h3>Build 5.0.4, 4 March 2013</h3>

This build contains two bug fixes, an update to the Athena Analyst's Guide 
and an addition to the automated test suite for demsit rules. The list
of packages is as follows:<p>

<ul>
<li> Bug 3887: athena(1): New 040-demsit_rules.test
<li> Bug 3892: athena_sim(1): bgerror when editing multiple civ groups
<li> Bug 3897: AAG: UNEMP and CONSUMP models
<li> Bug 3898: CONSUMP rule set is not firing 
</ul>

<h3>Build 5.0.3, 25 February 2013</h3>

This build contains some functional changes to the Econ model related
to the visibility of individual actor expenditures and a whole host of 
bug fixes. Also, civilian groups now have expected, required and 
actual levels of consumption to simulate whether they are getting enough
goods. The CONSUMP rule set is implemented to keep track of the effects 
of more or less than expected levels of consumption. The UNEMP rule set 
has been simplified. Refer to the rules doc for details on both these 
rule sets. The full list of changes is as follows:<p>

<ul>
<li> Bug 3777: athena_sim(1): actor expenditures should be visible to the user
<li> Bug 3852: athena(1): update income_a nested in select on income_a
<li> Bug 3853: athena(1): Budget actors' expenditures need to come from WORLD
<li> Bug 3858: athena_sim(1): actors income not making it to In page in CGE
<li> Bug 3874: Change in remittances is added when scenario is locked
<li> Bug 3875: Econ/SAM help page scenario prep picture needs to be updated
<li> Bug 3878: Unemployment Rate greater than 100%
<li> Bug 3879: Too Many Civilians Bgerror
<li> Bug 3884: athena_sim(1): Unemployment rate in CGE does not match SAM
<li> Bug 3888: athena_sim(1): make TurFrac a model parameter
<li> Bug 3890: athena_sim(1): black market production capacity needs to be an input
<li> Bug 3891: athena_sim(1): actors need to get their income on scenario lock
<li> Bug 3893: athena(1): change default econ security parameters in parmdb(5)
<li> Bug 3894: athena(1): beef up econ report in detail browser when something goes wrong
<li> Bug 3877: Condition Bgerror: BUDGET actor's cash reserve
<li> Bug 3882: bgerror: can't read "strictSecurity"
<li> Bug 3883: athena(1): 040-aam_rules.test
<li> Bug 3886: athena(1): 040-ensit_rules.test
<li> Bug 3889: athena(1): Consumption of Goods by Civilian Groups
<li> Bug 3895: athena(1): Simplify UNEMP rule set
<li> Bug 3896: athena(1): Add CONSUMP rule set 
</ul>

<h3>Build 5.0.2, 5 February 2013</h3>

There are four major areas of new functionality in this build: the 
economics model has a significant overhaul, the SPEND tactic is changed
to include a per sector spending profile (this means the overhead 
percentage is gone) and DEPOSIT and WITHDRAW tactics are added, 
the introduction of "budget" actors that don't have
an income but rather a pool of money on which to draw, and an overhaul 
to Athena's rule set infrastructure. There's also been some clean up of
unnecessary objects: actsits and demsits are gone and a host of bug fixes
and documentation updates. The full list is as follows:<p>

<ul>
<li> Bug 3834: Econ/SAM help page is confusing
<li> Bug 3837: athena_sim(1): implement changing remittances over time
<li> Bug 3841: athena_sim(1): CGE updates
<li> Bug 3850: athena_sim(1): more CGE updates
<li> Bug 3851: athena_sim(1): econ model not sending BaseGDP from SAM to CGE
<li> Bug 3855: athena_test(1): test failures due to econ model updates
<li> Bug 3856: athena_sim(1): econ model does not scale well
<li> Bug 3871: athena_sim(1): cannot edit SAM
<li> Bug 3831: athena(1): Population Change Rate
<li> Bug 3839: Tactic Database Architecture
<li> Bug 3840: DEPOSIT, WITHDRAW tactics
<li> Bug 3843: Too many ENI Driver ids
<li> Bug 3844: athena(1): New SPEND tactic
<li> Bug 3846: athena(1): Save actor expenditures by sector
<li> Bug 3847: athena(1): Remove overhead percentage
<li> Bug 3849: athena(1): Can't save scenario
<li> Bug 3857: athena(1): Budget Actors
<li> Bug 3859: athena(1): civgroups get lfp and housing attributes
<li> Bug 3860: athena(1): Use civgroups.lfp as the labor force percentage
<li> Bug 3861: athena(1): Condition Database Architecture
<li> Bug 3867: athena(1): Remove actsit objects
<li> Bug 3868: athena(1): Remove demsit objects
<li> Bug 3869: athena(1): Rule Set Overhaul
<li> Bug 3872: athena(1): MOOD rule set test suite
</ul>

<h3>Build 5.0.1, 14 January 2013</h3>

The focus of this build is the new requirement to allow civilian 
population to flow from one group to another, with the derived
requirement that civilian groups can now be "empty", i.e., have a
population of zero.  This change leads to a number of significant
functional differences.  In a nutshell:

<ul>
<li> Civilian groups now either live by subsistence agriculture or
     they don't.  There is no SA fraction.
<li> The civilian activities DISPLACED and IN_CAMP have been removed.
     To displace members of a group, flow them into a group in another
     neighborhood.
<li> The DAM rule sets (and the rest of the models) now ignore empty groups.
<li> The new FLOW tactic is used to move population around.
</ul><p>

In addition there have been many changes to the Econ model, including
new views on the data, though this work is on-going.<p>

The full set of changes is as follows:<p>

<ul>
<li> Bug 3798: Subsistence agriculture flag
<li> Bug 3804: athena_sim(1): DISPLACE tactic should no longer allow specifying a neighborhood
<li> Bug 3805: athena_sim(1): change cell model file name from eco6x6 to cge6x6
<li> Bug 3806: athena_sim(1): include calculation of Base GDP in SAM sheet
<li> Bug 3807: athena(1): Civilian groups can have a basepop of 0
<li> Bug 3808: athena(1): ENI Service and Empty Civilian Groups
<li> Bug 3809: athena(1): [demog analyze econ] bgerror's on empty group.
<li> Bug 3811: athena_sim(1): have econ model output the cmsnap(5) format rather than just a dump of cells when an error occurs
<li> Bug 3812: athena(1): Empty groups and ensits, actsits, CONTROL, MOOD, IOMs, and MADs
<li> Bug 3813: athena(1): Attrition and Empty Civilian Groups
<li> Bug 3814: athena(1): Empty Groups and appserver pages
<li> Bug 3817: athena_sim(1): refactor Econ/SAM tab
<li> Bug 3818: athena_test fails when TCLLIBPATH doesn't exist
<li> Bug 3819: Empty civilian groups and security
<li> Bug 3820: athena_sim(1): updated CGE cell model
<li> Bug 3821: Remove DISPLACED and IN_CAMPS activities
<li> Bug 3822: Remove unit-based displacement from the Demographics Model
<li> Bug 3823: athena_sim(1): strategy initialization must take place before econ initialization when locking
<li> Bug 3824: Demographics tables are initialized during PREP
<li> Bug 3825: athena_sim(1): FUNDENI tactic fails to refund money correctly when trying to fund empty groups
<li> Bug 3826: Demog allows population adjustments
<li> Bug 3827: athena_sim(1): Add new views for T matrix and X+T matrix to Econ/SAM tab
<li> Bug 3828: FLOW Tactic: Data Editing
<li> Bug 3829: FLOW Tactic: Execution
<li> Bug 3830: Simplified Driver Signatures
</ul>

<h3>Build 5.0.0, 10 December 2012</h3>

This is the initial 5.0.x baseline; it is based on the same code as
Athena 4.1.0.<p>

<hr>

<address><a href="mailto:William.H.Duquette@jpl.nasa.gov">William.H.Duquette@jpl.nasa.gov</a></address>
</body>
</html>



