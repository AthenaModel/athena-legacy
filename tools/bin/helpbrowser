#!/bin/sh
# -*-tcl-*-
# The next line restarts using tclsh \
exec tclsh8.5 "$0" "$@"

#-----------------------------------------------------------------------
# TITLE:
#    helpbrowser
#
# AUTHOR:
#    Will Duquette
#
# DESCRIPTION:
#    Standalone help browser based on Tkhtml 2.0.
#
# TO BE DONE:
#
# * Need to work on the hdb stuff: we need some more infrastructure there.
# * Need to handle errors better
# * Need some more help pages.
#
#-----------------------------------------------------------------------

package require Tk 8.5
package require projectlib
package require projectgui

namespace import marsutil::* marsgui::* projectlib::* projectgui::*

#-------------------------------------------------------------------
# Main Line Code

lassign $argv filename page

if {$filename eq ""} {
    puts "Usage: helpbrowser file.helpdb \[page\]"
    exit 1
}

if {![file exists $filename]} {
    puts "No such help file: $filename"
    exit 1
}

helpdb hdb
hdb open $filename

helpbrowser .hb -helpdb ::hdb

if {$page ne ""} {
    if {![hdb page exists $page]} {
        puts "No such page: $page"
        exit 1
    }

    .hb showpage $page
}

bind . <F12> [list debugger new]


pack .hb -fill both -expand yes




